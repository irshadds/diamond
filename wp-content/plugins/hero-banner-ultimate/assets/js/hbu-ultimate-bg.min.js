!function(i,n,a){var t=n.ContainerPlayer={};"function"!=typeof Object.create&&(Object.create=function(e){function o(){}return o.prototype=e,new o});var r={defaults:{autoplay:!0,loop:!0,muted:!0,controls:!(String.prototype.replaceAll=function(e,o){return this.replace(new RegExp(e,"g"),o)}),ratio:16/9,fitContainer:!0,forceAspect:!1},init:function(e,o){var t=this;return t.$window=i(n),t.$container=i(e),t.$dataContainer=t.$container,t.options=i.extend(!0,{},t.defaults,o),t.ID=parseInt(1e6*Math.random()),t.outerID="containerPlayerOuter"+t.ID,t.innerID="containerPlayerInner"+t.ID,t.posterID="containerPlayerPoster"+t.ID,t.overlayID="containerPlayerOverlay"+t.ID,t.resizeEventID="resize.ContainerPlayer"+t.ID,"BODY"===e.tagName&&(t.$container=i('<div class="container-player fullscreen-background"></div>'),i(e).append(t.$container)),t.createPlayerDOM(),t.adapter=t.detectAdapter(),t.adapter.init(t),t.$window.on(t.resizeEventID,t.resize.bind(t)).trigger(t.resizeEventID),t.$dataContainer.trigger("player.initialised",[t]),t},detectAdapter:function(){if("object"==typeof this.options.youTube)return Object.create(s);if("object"==typeof this.options.vimeo)return Object.create(VimeoAdapter);if("object"==typeof this.options.html5)return Object.create(o);throw"Invalid options passed, no adapter configuration found."},createPlayerDOM:function(){var e=this;e.player={},e.player.$outer=i('<div id="'+e.outerID+'" class="container-player-outer"></div>'),e.player.$inner=i('<div id="'+e.innerID+'" class="container-player-inner"></div>'),e.player.$poster=i('<div id="'+e.posterID+'" class="container-player-poster"></div>'),e.$container.append(e.player.$outer.append(e.player.$poster,e.player.$inner)),e.options.overlay&&(e.player.$overlay=i('<div id="'+e.overlayID+'" class="container-player-overlay"></div>'),void 0!==e.options.overlay.class&&e.player.$overlay.addClass(e.options.overlay.class),void 0!==e.options.overlay.opacity&&e.player.$overlay.css("opacity",e.options.overlay.opacity),void 0!==e.options.overlay.color&&e.player.$overlay.css("background-color",e.options.overlay.color),void 0!==e.options.overlay.image&&(e.player.$overlay.css("background-image","url("+e.options.overlay.image+")"),void 0!==e.options.overlay.backgroundSize&&e.player.$overlay.css("background-size","url("+e.options.overlay.backgroundSize+")"),void 0!==e.options.overlay.backgroundRepeat&&e.player.$overlay.css("background-repeat","url("+e.options.overlay.backgroundRepeat+")")),e.$container.append(e.player.$overlay))},setPoster:function(e){this.player.$poster.css("background-image","url("+e+")")},resize:function(){var e,o,t=this;if(t.options.width=t.$container.width(),t.options.height=t.$container.height(),i.contains(a,t.player.$inner[0])||(t.player.$inner=i("#"+t.innerID)),t.options.forceAspect)return o=(t.options.width/t.options.ratio).toFixed(3),t.$container.height(o),void i([t.player.$inner,t.player.$poster]).each(function(){i(this).css({left:0,top:0,height:o,width:t.options.width})});t.options.fitContainer&&t.options.width/t.options.ratio<t.options.height?(e=Math.ceil(t.options.height*t.options.ratio),i([t.player.$inner,t.player.$poster]).each(function(){i(this).width(e).height(t.options.height).css({left:(t.options.width-e)/2,top:0})})):(o=Math.ceil(t.options.width/t.options.ratio),i([t.player.$inner,t.player.$poster]).each(function(){i(this).width(t.options.width).height(o).css({left:0,top:(t.options.height-o)/2})})),t.$dataContainer.trigger("player.resized",[t])},videoLoaded:function(){this.$container.addClass("loaded"),this.$dataContainer.trigger("video.loaded",[this])},videoPlaying:function(){this.$container.removeClass("paused").addClass("playing"),this.$dataContainer.trigger("video.playing",[this])},videoPaused:function(){this.$container.removeClass("playing").addClass("paused"),this.$dataContainer.trigger("video.paused",[this])},videoEnded:function(){this.$container.removeClass("playing"),this.$dataContainer.trigger("video.ended",[this])},destroy:function(){for(var e in this.adapter.destroy(),this.player.$inner.remove(),this.player.$outer.remove(),this.player.$poster.remove(),this.player.$overlay&&this.player.$overlay.remove(),this.$window.unbind(this.resizeEventID),this.$container.unbind(),this.$container.empty(),this.$container.removeClass("playing paused loaded transition-in"),this.$dataContainer.trigger("player.destroyed"),this.$dataContainer.removeData("player"),this)this[e]=null},play:function(){this.adapter.play()},pause:function(){this.adapter.pause()},goTo:function(e){this.adapter.goTo(e)},volume:function(e){this.adapter.volume(e)},mute:function(){this.adapter.mute()},unMute:function(){this.adapter.unMute()}},e={defaults:{},init:function(e){throw"Not implemented"},destroy:function(){throw"Not implemented"},play:function(){throw new Error("Not implemented")},pause:function(){throw new Error("Not implemented")},goTo:function(e){throw new Error("Not implemented")},volume:function(e){throw new Error("Not implemented")},mute:function(){throw new Error("Not implemented")},unMute:function(){throw new Error("Not implemented")}},o=i.extend(Object.create(e),{defaults:{sources:[],props:{preload:"auto",crossorigin:null}},init:function(e){this.containerPlayer=e,this.options=i.extend(!0,{},this.defaults,this.containerPlayer.options.html5),this.containerPlayer.$container.addClass("html5"),void 0!==this.options.src&&0===this.options.sources.length&&(this.options.props.src=this.options.src),void 0!==this.options.poster&&(this.containerPlayer.setPoster(this.options.poster),this.options.props.poster=this.options.poster),void 0===this.options.props.autoplay&&(this.options.props.autoplay=this.containerPlayer.options.autoplay),void 0===this.options.props.loop&&(this.options.props.loop=this.containerPlayer.options.loop),void 0===this.options.props.controls&&(this.options.props.controls=this.containerPlayer.options.controls),void 0===this.options.props.muted&&(this.options.props.muted=this.containerPlayer.options.muted),this.createHTML5Video()},createHTML5Video:function(){for(var e in this.$video=i("<video></video>").html("Your browser doesn't support HTML5 video tag.").on("canplay playing pause ended",this.onPlayerStateChange.bind(this)),this.options.props){var o=this.options.props[e];o&&this.$video.prop(e,o)}for(var t in this.options.sources)this.$video.append(i("<source></source>").prop("src",this.options.sources[t][1]).prop("type",this.options.sources[t][0]));this.containerPlayer.player.$inner.append(this.$video)},onPlayerStateChange:function(e){switch(e.type){case"canplay":this.containerPlayer.videoLoaded();break;case"playing":this.containerPlayer.videoPlaying();break;case"pause":this.containerPlayer.videoPaused();break;case"ended":this.containerPlayer.videoEnded()}},destroy:function(){for(var e in this.pause(),this.$video.prop("src","#"),this.$video.remove(),this.containerPlayer.$container.removeClass("html5"),this)this[e]=null},play:function(){this.$video[0].play()},pause:function(){this.$video[0].pause()},goTo:function(e){this.$video[0].currentTime=e},volume:function(e){this.$video[0].volume=e/100},mute:function(){this.$video[0].muted=!0},unMute:function(){this.$video[0].muted=!1}}),s=i.extend(Object.create(e),{defaults:{videoId:"",tranitionIn:!1,playerVars:{iv_load_policy:3,modestbranding:1,showinfo:0,wmode:"opaque",branding:0,autohide:1,rel:0}},init:function(e){var o=this;o.containerPlayer=e,this.containerPlayer.$container.addClass("youtube"),o.options=i.extend(!0,{},o.defaults,o.containerPlayer.options.youTube),void 0!==o.options.poster&&o.containerPlayer.setPoster(this.options.poster),void 0===o.options.playerVars.autoplay&&(o.options.playerVars.autoplay=o.containerPlayer.options.autoplay?1:0),void 0===o.options.playerVars.controls&&(o.options.playerVars.controls=o.containerPlayer.options.controls?1:0),this.options.tranitionIn&&this.containerPlayer.$container.addClass("transition-in"),void 0===t.YouTube&&(t.YouTube={apiLoading:!1,onApiLoad:i.Deferred()}),o.whenApiIsReady(o.createPlayer.bind(o)),o.loadApi()},whenApiIsReady:function(e){"object"!=typeof YT?t.YouTube.onApiLoad.done(function(){e()}):e()},loadApi:function(){var e,o;"undefined"==typeof YT&&!1===t.YouTube.apiLoading&&(t.YouTube.apiLoading=!0,n.onYouTubeIframeAPIReady=function(){n.onYouTubeIframeAPIReady=null,t.YouTube.onApiLoad.resolve()},e=a.createElement("script"),o=a.getElementsByTagName("head")[0],"file://"==n.location.origin?e.src="http://www.youtube.com/iframe_api":e.src="//www.youtube.com/iframe_api",o.appendChild(e),e=o=null)},createPlayer:function(){var e=this;e.player=new YT.Player(e.containerPlayer.innerID,{videoId:e.options.videoId,playerVars:e.options.playerVars,events:{onReady:e.onPlayerReady.bind(e),onStateChange:e.onPlayerStateChange.bind(e)}})},onPlayerReady:function(e){this.containerPlayer.videoLoaded(),this.containerPlayer.options.muted&&e.target.mute()},onPlayerStateChange:function(e){var o=this;switch(e.data){case YT.PlayerState.PLAYING:var t=setInterval(function(){.26<=o.player.getCurrentTime()&&(clearInterval(t),o.containerPlayer.videoPlaying())},50);break;case YT.PlayerState.PAUSED:this.containerPlayer.videoPaused();break;case YT.PlayerState.ENDED:this.containerPlayer.videoEnded(),this.containerPlayer.options.loop&&(this.goTo(0),this.play())}},destroy:function(){for(var e in this.pause(),this.player.destroy(),this.containerPlayer.$container.removeClass("youtube"),this)this[e]=null},play:function(){this.player.playVideo()},pause:function(){this.player.pauseVideo()},goTo:function(e){this.player.seekTo(e)},mute:function(){this.player.mute()},unMute:function(){this.player.unMute()},volume:function(e){this.player.setVolume(e),this.player.unMute()}});VimeoAdapter=i.extend(Object.create(e),{defaults:{videoId:"",transitionIn:!1,playerVars:{autopause:!1,byline:!1,color:"00adef",portrait:!1,title:!1}},init:function(e){var o=this;o.containerPlayer=e,this.containerPlayer.$container.addClass("vimeo"),o.options=i.extend(!0,{},o.defaults,o.containerPlayer.options.vimeo),o.options.playerVars.id=o.options.videoId,void 0===t.Vimeo&&(t.Vimeo={apiLoading:!1,onApiLoad:i.Deferred(),apiCheckInterval:null}),void 0!==o.options.poster&&o.containerPlayer.setPoster(this.options.poster),void 0===o.options.playerVars.autoplay&&(o.options.playerVars.autoplay=o.containerPlayer.options.autoplay),void 0===o.options.playerVars.controls&&(o.options.playerVars.background=!o.containerPlayer.options.controls),void 0===this.options.playerVars.loop&&(this.options.playerVars.loop=this.containerPlayer.options.loop),this.options.tranitionIn&&this.containerPlayer.$container.addClass("transition-in"),o.whenApiIsReady(o.createPlayer.bind(this)),o.loadApi()},whenApiIsReady:function(e){"object"!=typeof Vimeo?t.Vimeo.onApiLoad.done(function(){e()}):e()},loadApi:function(){var e,o;"undefined"==typeof Vimeo&&!1===t.Vimeo.apiLoading&&(t.Vimeo.apiLoading=!0,t.Vimeo.apiCheckInterval=setInterval(function(){"undefined"!=typeof Vimeo&&(clearInterval(t.Vimeo.apiCheckInterval),t.Vimeo.onApiLoad.resolve())},100),e=a.createElement("script"),o=a.getElementsByTagName("head")[0],"file://"==n.location.origin?e.src="http://player.vimeo.com/api/player.js":e.src="//player.vimeo.com/api/player.js",o.appendChild(e),e=o=null)},getVideoUrl:function(){var e=i.param(this.options.playerVars).replaceAll("false","0").replaceAll("true","1"),o="file://"==n.location.origin?"http://player.vimeo.com/video/":"//player.vimeo.com/video/";return o+this.options.videoId+"?"+e},createPlayer:function(){var t=this,e=i("<iframe></iframe>").prop("src",this.getVideoUrl());this.containerPlayer.player.$inner.append(e),this.player=new Vimeo.Player(e[0]),this.containerPlayer.options.muted&&this.player.setVolume(0),this.player.on("play",function(e){var o=setInterval(function(){t.player.getCurrentTime().then(function(e){0<e&&(clearInterval(o),t.containerPlayer.videoPlaying())})},50)}),this.player.on("pause",this.containerPlayer.videoPaused.bind(this.containerPlayer)),this.player.on("ended",this.containerPlayer.videoEnded.bind(this.containerPlayer)),this.player.on("loaded",this.containerPlayer.videoLoaded.bind(this.containerPlayer)),e=null},destroy:function(){for(var e in this.pause(),this.containerPlayer.$container.addClass("vimeo"),this.player.unload(),this)this[e]=null},play:function(){this.player.play()},pause:function(){this.player.pause()},goTo:function(e){this.player.setCurrentTime(e)},volume:function(e){this.player.setVolume(e/100)},mute:function(){this.player.setVolume(0),this.initialPlayerVolume=this.player.getVolume()},unMute:function(){this.player.setVolume(this.initialPlayerVolume||.7)}}),i.fn.ContainerPlayer=function(o){return this.each(function(){var e=Object.create(r);e.init(this,o),i.data(this,"player",e),e=null})}}(jQuery,window,document);